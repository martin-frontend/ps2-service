(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9955062"],{"513a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"table-container"},[a("p",[t._v("後台帳號")]),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:t.createUser}})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tabledata,border:""}},[a("el-table-column",{attrs:{label:"功能",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.roleLevel?[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.modifyUser(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteUser(e.row.id)}}},[t._v("刪除")])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"帳號",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.account))]}}])}),a("el-table-column",{attrs:{label:"狀態",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.statusName(e.row.status)))]}}])}),a("el-table-column",{attrs:{label:"權限",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.roleName))]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:"建立時間",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createdAt))]}}])})],1),a("Dialog",{ref:"dialog",on:{initData:t.initData}})],1)},n=[],r=a("2909"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title+"帳號","before-close":t.handleClose,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"帳號","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入帳號"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密碼","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),"修改"!==t.title?a("el-form-item",{attrs:{label:"確認密碼","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼","show-password":""},model:{value:t.formData.c_password,callback:function(e){t.$set(t.formData,"c_password",e)},expression:"formData.c_password"}})],1):t._e(),a("el-form-item",{attrs:{label:"權限","label-width":t.formLabelWidth}},[a("el-select",{staticClass:"form-width",attrs:{placeholder:"請選擇權限"},model:{value:t.formData.roleId,callback:function(e){t.$set(t.formData,"roleId",e)},expression:"formData.roleId"}},t._l(t.roleSelectList.filter((function(t){return t.roleLevel})),(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"狀態","label-width":t.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("啟用")]),a("el-radio",{attrs:{label:"0"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("停用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),"新增"===t.title?a("el-button",{attrs:{type:"primary"},on:{click:t.createUser}},[t._v("建 立")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateUser}},[t._v("更 新")])],1)],1)],1)},l=[],i=a("fd85"),c={data:function(){return{formData:{},dialogFormVisible:!1,formLabelWidth:"80px",title:"",roleSelectList:[]}},mounted:function(){this.initRoleSelect()},methods:{resetFormData:function(){this.formData={}},handleClose:function(){this.loading=!1,this.resetFormData(),this.dialogFormVisible=!1},handleOpen:function(t,e){this.dialogFormVisible=!0,this.title=t,"修改"===t&&(this.formData=Object.assign({},e))},initRoleSelect:function(){var t=this;Object(i["e"])().then((function(e){e.data.success?t.roleSelectList=Object(r["a"])(e.data.content):t.roleSelectList=[]})).catch((function(t){console.log(t)}))},createUser:function(){var t=this,e=new FormData;e.append("account",this.formData.account),e.append("password",this.formData.password),e.append("roleId",this.formData.roleId),e.append("status",this.formData.status),Object(i["b"])(e).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))},updateUser:function(){var t=this,e=new FormData;e.append("account",this.formData.account),e.append("password",this.formData.password),e.append("roleId",this.formData.roleId),e.append("status",this.formData.status),e.append("id",this.formData.id),Object(i["h"])(e).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))}}},u=c,d=(a("c2df"),a("2877")),f=Object(d["a"])(u,s,l,!1,null,"3519b34e",null),m=f.exports,h={name:"ManageAccount",components:{Dialog:m},data:function(){return{tabledata:[]}},computed:{},mounted:function(){this.initData()},methods:{createUser:function(){this.$refs.dialog.handleOpen("新增")},statusName:function(t){switch(t){case"0":return"停用";case"1":return"啟用"}},initData:function(){var t=this;Object(i["f"])().then((function(e){e.data.success?t.tabledata=Object(r["a"])(e.data.content):(t.tabledata=[],t.$message.warning(e.data.msg))})).catch((function(t){console.log(t)}))},deleteUser:function(t){var e=this,a=new FormData;a.append("id",t),Object(i["d"])(a).then((function(t){t.data.success?(e.initData(),e.$message.success(t.data.msg)):e.$message.warning(t.data.msg)})).catch((function(t){console.log(t)}))},modifyUser:function(t){console.log(t),this.$refs.dialog.handleOpen("修改",t)}}},p=h,b=(a("c061"),Object(d["a"])(p,o,n,!1,null,"53045d63",null));e["default"]=b.exports},"64fa":function(t,e,a){},"9ee4":function(t,e,a){},c061:function(t,e,a){"use strict";a("64fa")},c2df:function(t,e,a){"use strict";a("9ee4")},fd85:function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"h",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return d}));var o=a("b775");function n(){return Object(o["a"])({url:"user",method:"get"})}function r(t){return Object(o["a"])({url:"user",method:"post",data:t})}function s(t){return Object(o["a"])({url:"user",method:"put",data:t})}function l(t){return Object(o["a"])({url:"user",method:"delete",data:t})}function i(){return Object(o["a"])({url:"authority/role",method:"get"})}function c(t){return Object(o["a"])({url:"authority/role",method:"post",data:t})}function u(t){return Object(o["a"])({url:"authority/role",method:"put",data:t})}function d(t){return Object(o["a"])({url:"authority/role",method:"delete",data:t})}}}]);