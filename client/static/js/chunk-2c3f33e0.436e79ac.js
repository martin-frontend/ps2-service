(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c3f33e0"],{"513a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"pageContainer",staticClass:"page-container"},[a("div",{staticClass:"table-container"},[a("div",{staticClass:"table-head"},[a("el-tag",[t._v("後台帳號")]),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:t.createUser}})],1),a("el-table",{attrs:{data:t.tabledata,border:""}},[a("el-table-column",{attrs:{label:"功能",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.roleLevel?[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.modifyUser(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteUser(e.row.id)}}},[t._v("刪除")])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"帳號",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.account))]}}])}),a("el-table-column",{attrs:{label:"狀態",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.statusName(e.row.status)))]}}])}),a("el-table-column",{attrs:{label:"權限",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.roleName))]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:"建立時間",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createdAt))]}}])})],1),a("div",{staticClass:"table-pagination"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[25,50,75,100],"page-size":25,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("Dialog",{ref:"dialog",on:{initData:t.initData}})],1)},r=[],n=a("2909"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title+"帳號","before-close":t.handleClose,"v-if":t.dialogFormVisible,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"帳號",prop:"account","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入帳號"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密碼",prop:"password","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),"修改"!==t.title?a("el-form-item",{attrs:{prop:"c_password",label:"確認密碼","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼","show-password":""},model:{value:t.formData.c_password,callback:function(e){t.$set(t.formData,"c_password",e)},expression:"formData.c_password"}})],1):t._e(),a("el-form-item",{attrs:{label:"權限",prop:"roleId","label-width":t.formLabelWidth}},[a("el-select",{staticClass:"form-width",attrs:{placeholder:"請選擇權限"},model:{value:t.formData.roleId,callback:function(e){t.$set(t.formData,"roleId",e)},expression:"formData.roleId"}},t._l(t.roleSelectList.filter((function(t){return t.roleLevel})),(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"狀態","label-width":t.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("啟用")]),a("el-radio",{attrs:{label:"0"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("停用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),"新增"===t.title?a("el-button",{attrs:{type:"primary"},on:{click:t.createUser}},[t._v("建 立")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateUser}},[t._v("更 新")])],1)],1)],1)},i=[],l=a("fd85"),c={data:function(){return{formData:{status:"1"},dialogFormVisible:!1,formLabelWidth:"80px",title:"",roleSelectList:[],rules:{account:[{required:!0,message:"請輸入帳號",trigger:"change"}],password:[{required:!0,message:"請輸入密碼",trigger:"change"}],c_password:[{required:!0,message:"請輸入確認密碼",trigger:"change"}],roleId:[{required:!0,message:"請輸入權限",trigger:"change"}]}}},mounted:function(){this.initRoleSelect()},methods:{resetFormData:function(){this.formData={}},handleClose:function(){this.loading=!1,this.resetFormData(),this.dialogFormVisible=!1},handleOpen:function(t,e){this.dialogFormVisible=!0,this.title=t,"修改"===t&&(this.formData=Object.assign({},e))},initRoleSelect:function(){var t=this;Object(l["e"])().then((function(e){e.data.success?t.roleSelectList=Object(n["a"])(e.data.content.data):t.roleSelectList=[]})).catch((function(t){console.log(t)}))},createUser:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=new FormData;a.append("account",t.formData.account),a.append("password",t.formData.password),a.append("roleId",t.formData.roleId),a.append("status",t.formData.status),Object(l["b"])(a).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))}}))},updateUser:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=new FormData;a.append("account",t.formData.account),a.append("password",t.formData.password),a.append("roleId",t.formData.roleId),a.append("status",t.formData.status),a.append("id",t.formData.id),Object(l["h"])(a).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))}}))}}},u=c,d=(a("54b3"),a("2877")),f=Object(d["a"])(u,s,i,!1,null,"2b19d9be",null),m=f.exports,p={name:"ManageAccount",components:{Dialog:m},data:function(){return{tabledata:[],pageData:{pagesize:25,page:1},pageTotal:0}},computed:{},mounted:function(){this.initData()},methods:{handleSizeChange:function(t){this.pageData.pagesize=t,this.initData()},handleCurrentChange:function(t){this.pageData.page=t,this.initData()},createUser:function(){this.$refs.dialog.handleOpen("新增")},statusName:function(t){switch(t){case"0":return"停用";case"1":return"啟用"}},initData:function(){var t=this,e={};e.pageSize=this.pageData.pagesize,e.page=this.pageData.page,Object(l["f"])(e).then((function(e){e.data.success?(t.tabledata=Object(n["a"])(e.data.content.data),t.pageTotal=e.data.content.total,t.$nextTick((function(){t.$refs.pageContainer.scrollTo({top:0,behavior:"smooth"})}))):(t.tabledata=[],t.$message.warning(e.data.msg))})).catch((function(t){console.log(t)}))},deleteUser:function(t){var e=this,a=new FormData;a.append("id",t),Object(l["d"])(a).then((function(t){t.data.success?(e.initData(),e.$message.success(t.data.msg)):e.$message.warning(t.data.msg)})).catch((function(t){console.log(t)}))},modifyUser:function(t){this.$refs.dialog.handleOpen("修改",t)}}},h=p,g=(a("bc46"),Object(d["a"])(h,o,r,!1,null,"5f6103f7",null));e["default"]=g.exports},"54b3":function(t,e,a){"use strict";a("c04d")},a4fc:function(t,e,a){},bc46:function(t,e,a){"use strict";a("a4fc")},c04d:function(t,e,a){},fd85:function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"h",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return d}));var o=a("b775");function r(t){return Object(o["a"])({url:"user",method:"get",params:t})}function n(t){return Object(o["a"])({url:"user",method:"post",data:t})}function s(t){return Object(o["a"])({url:"user",method:"put",data:t})}function i(t){return Object(o["a"])({url:"user",method:"delete",data:t})}function l(t){return Object(o["a"])({url:"authority/role",method:"get",params:t})}function c(t){return Object(o["a"])({url:"authority/role",method:"post",data:t})}function u(t){return Object(o["a"])({url:"authority/role",method:"put",data:t})}function d(t){return Object(o["a"])({url:"authority/role",method:"delete",data:t})}}}]);