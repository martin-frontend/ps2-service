(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26be055a"],{"0b29":function(e,t,a){},"2e5a":function(e,t,a){"use strict";a("0b29")},3379:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pageContainer",staticClass:"page-container"},[a("div",{staticClass:"table-container"},[a("div",{staticClass:"table-head"},[a("el-tag",[e._v("權限")]),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:e.createRole}})],1),a("el-table",{attrs:{data:e.tabledata,border:""}},[a("el-table-column",{attrs:{label:"功能",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.roleLevel?[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.modifyRole(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.deleteRole(t.row.id)}}},[e._v("刪除")])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"權限名稱",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),a("el-table-column",{attrs:{label:"權限"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.roles))]}}])})],1),a("div",{staticClass:"table-pagination"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[25,50,75,100],"page-size":25,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("Dialog",{ref:"dialog",on:{initData:e.initData}})],1)},o=[],i=a("2909"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title+"權限","before-close":e.handleClose,"v-if":e.dialogFormVisible,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules}},[a("el-form-item",{attrs:{label:"權限名稱",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"權限名稱"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"權限","label-width":e.formLabelWidth}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roleList,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.name,name:t.name}},[a("el-checkbox-group",{model:{value:e.formData.roles,callback:function(t){e.$set(e.formData,"roles",t)},expression:"formData.roles"}},e._l(t.role,(function(e){return a("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),"新增"===e.title?a("el-button",{attrs:{type:"primary"},on:{click:e.createRole}},[e._v("建 立")]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("更 新 ")])],1)],1)],1)},l=[],s=(a("c975"),a("a15b"),a("b0c0"),a("ac1f"),a("1276"),a("fd85")),c=[{name:"玩家資料",role:["查詢帳號資訊","查詢遊戲歷程"]},{name:"統計數據",role:["查詢活躍帳戶"]},{name:"營運功能",role:["查詢線上公告","查詢帳號停權","修改線上公告","修改帳號停權"]},{name:"帳號權限",role:["查詢管理帳號","查詢權限設定","修改管理帳號","修改權限設定"]}],u=[];function d(){return c}function f(){return u}var m={data:function(){return{formData:{roles:f()},dialogFormVisible:!1,formLabelWidth:"80px",title:"",roleList:d(),activeName:"玩家資料",rules:{name:[{required:!0,message:"請輸入權限",trigger:"change"}]}}},methods:{resetFormData:function(){this.formData={id:"",name:"",roleLevel:"",roles:f()}},handleClose:function(){this.loading=!1,this.resetFormData(),this.dialogFormVisible=!1},handleOpen:function(e,t){if(this.dialogFormVisible=!0,this.title=e,"修改"===e){this.formData=Object.assign({},t);var a=this.formData.roles;this.formData.roles=a.split(",")}},createRole:function(){var e=this;this.$refs.form.validate((function(t){if(t)if(e.formData.roles.length){var a=new FormData;a.append("name",e.formData.name),a.append("roles",e.formData.roles.join()),Object(s["a"])(a).then((function(t){t.data.success?(e.$emit("initData"),e.$message.success(t.data.msg)):e.$message.warning(t.data.msg),e.dialogFormVisible=!1})).catch((function(e){console.log(e)}))}else e.$message.warning("權限不可全為空")}))},updateRole:function(){var e=this;this.$refs.form.validate((function(t){if(t)if(e.formData.roles.length){var a=new FormData;a.append("name",e.formData.name),a.append("roles",e.formData.roles.join()),a.append("id",e.formData.id),Object(s["g"])(a).then((function(t){t.data.success?(e.$emit("initData"),e.$message.success(t.data.msg)):e.$message.warning(t.data.msg),e.dialogFormVisible=!1})).catch((function(e){console.log(e)}))}else e.$message.warning("權限不可全為空")}))},defaultPage:function(e){var t=f();return!(t.indexOf(e)<0)}}},g=m,h=(a("2e5a"),a("2877")),p=Object(h["a"])(g,r,l,!1,null,"3d7a9d3c",null),b=p.exports,v={name:"AuthoritySetting",components:{Dialog:b},data:function(){return{tabledata:[],pageData:{pagesize:25,page:1},pageTotal:0}},mounted:function(){this.initData()},created:function(){},methods:{handleSizeChange:function(e){this.pageData.pagesize=e,this.initData()},handleCurrentChange:function(e){this.pageData.page=e,this.initData()},initData:function(){var e=this,t={};t.pageSize=this.pageData.pagesize,t.page=this.pageData.page,Object(s["e"])(t).then((function(t){t.data.success?(e.tabledata=Object(i["a"])(t.data.content.data),e.pageTotal=t.data.content.total,e.$nextTick((function(){e.$refs.pageContainer.scrollTo({top:0,behavior:"smooth"})}))):(e.tabledata=[],e.$message.warning(t.data.msg))})).catch((function(e){console.log(e)}))},createRole:function(){this.$refs.dialog.handleOpen("新增")},deleteRole:function(e){var t=this,a=new FormData;a.append("id",e),Object(s["c"])(a).then((function(e){e.data.success?(t.initData(),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg)})).catch((function(e){console.log(e)}))},modifyRole:function(e){this.$refs.dialog.handleOpen("修改",e)}}},D=v,w=(a("5960"),Object(h["a"])(D,n,o,!1,null,"6b477df1",null));t["default"]=w.exports},5960:function(e,t,a){"use strict";a("682b")},"682b":function(e,t,a){},fd85:function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return d}));var n=a("b775");function o(e){return Object(n["a"])({url:"user",method:"get",params:e})}function i(e){return Object(n["a"])({url:"user",method:"post",data:e})}function r(e){return Object(n["a"])({url:"user",method:"put",data:e})}function l(e){return Object(n["a"])({url:"user",method:"delete",data:e})}function s(e){return Object(n["a"])({url:"authority/role",method:"get",params:e})}function c(e){return Object(n["a"])({url:"authority/role",method:"post",data:e})}function u(e){return Object(n["a"])({url:"authority/role",method:"put",data:e})}function d(e){return Object(n["a"])({url:"authority/role",method:"delete",data:e})}}}]);